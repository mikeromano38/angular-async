/*! angular-async 2013-11-05 */
"undefined"==typeof kernel&&(kernel={}),init=null,uninit=null,kernel._states={created:0,loading:1,waiting:2,initializing:3,ready:4,uninitializing:5},include=function(a){var b=kernel._activeModule;if(b)if(a=kernel._getAbsolute(a,b.path),b.isSubChild(a))kernel._throw("Circular dependence: "+a),b.invalidate();else{var c=kernel._getOrCreateModule(a);c.addChild(b);for(var d=0;d<b._statsList.length;d++)c.addStats(b._statsList[d])}},kernel.require=function(a,b,c){"string"==typeof a&&(a=[a]);for(var d=[],e=0;e<a.length;e++)d.push(kernel._getOrCreateModule(a[e]));return new kernel._Ticket(d,b,c)},kernel.release=function(a){a._release()},kernel.getStats=function(a){var b=a?a._getStats():kernel._stats,c=0;for(var d in kernel._states)c+=b[kernel._states[d]];var e=b[kernel._states.created]||b[kernel._states.loading];return{total:c,ready:b[kernel._states.ready],pending:e}},kernel._Module=function(a){this.path=a,this.state=kernel._states.created,this.children=[],this.parents=[],this._sCallbacks=[],this._fCallbacks=[],this._tickets=[],kernel._modules.push(this),kernel._loadQueue.push(this),this._statsList=[],this.addStats(kernel._stats)},kernel._Module.prototype.load=function(){this.setState(kernel._states.loading);var a=this,b=function(){a.state==kernel._states.loading&&a.finalizeLoading()},c=function(){a.state==kernel._states.loading&&a.invalidate()};kernel._platform.load(this.path,b,c)},kernel._Module.prototype.invalidate=function(){if(null!=this.state){for(;this._fCallbacks.length>0;)kernel._platform.thread(this._fCallbacks.shift());for(var a,b=0;b<this.children.length;b++)a=this.children[b],kernel._platform.thread(a.invalidate,a);this.destroy(),this==kernel._activeModule&&kernel._loadNext()}},kernel._Module.prototype.finalizeLoading=function(){"function"!=typeof init&&0==this.parents.length?(kernel._throw("Initializer missing: "+this.path),this.invalidate()):(this._init=init,this._uninit=uninit,this.isNeeded()?this.areParentsReady()?this.initialize():this.setState(kernel._states.waiting):this.destroy(),kernel._loadNext())},kernel._Module.prototype.initialize=function(){this.setState(kernel._states.initializing),kernel._platform.thread(function(){if(this._init)try{this._init()}catch(a){this.invalidate(),kernel._throw(a)}if(null!=this.state)if(this.isNeeded()){for(this.setState(kernel._states.ready);this._sCallbacks.length>0;)this._sCallbacks.shift()();for(var b=0;b<this.children.length;b++)this.children[b].state==kernel._states.waiting&&this.children[b].areParentsReady()&&this.children[b].initialize()}else this.uninitialize()},this)},kernel._Module.prototype.uninitialize=function(){this.setState(kernel._states.uninitializing),kernel._platform.thread(function(){kernel._platform.thread(function(){this.isNeeded()?this.initialize():this.destroy()},this),null!=this._uninit&&this._uninit()},this)},kernel._Module.prototype.destroy=function(){this.setState(null);var a,b=[];for(a=0;a<this.parents.length;a++)b[a]=this.parents[a];for(a=0;a<b.length;a++)b[a].removeChild(this);for(a=0;a<this._statsList.length;a++)this._statsList[a][this.state]--;for(a=0;a<kernel._modules.length;a++)if(kernel._modules[a]==this){kernel._modules.splice(a,1);break}this._init=null,this._uninit=null,this._statsList=null,this._sCallbacks=null,this._fCallbacks=null},kernel._Module.prototype.addChild=function(a){this.children.push(a),a.parents.push(this)},kernel._Module.prototype.removeChild=function(a){for(var b=0;b<this.children.length;b++)if(this.children[b]==a){this.children.splice(b,1);break}for(b=0;b<a.parents.length;b++)if(a.parents[b]==this){a.parents.splice(b,1);break}this.isNeeded()||(this.state==kernel._states.waiting?kernel._platform.thread(this.destroy,this):this.state==kernel._states.ready&&this.uninitialize())},kernel._Module.prototype.addStats=function(a){for(var b=0;b<this._statsList.length;b++)if(this._statsList[b]==a)return;for(this._statsList.push(a),a[this.state]++,b=0;b<this.parents.length;b++)this.parents[b].addStats(a)},kernel._Module.prototype.removeStats=function(a){for(var b=0;b<this._statsList.length;b++)if(this._statsList[b]==a){this._statsList.splice(b,1);break}},kernel._Module.prototype.setState=function(a){var b=this.state;this.state=a;for(var c=0;c<this._statsList.length;c++)this._statsList[c][b]--,this._statsList[c][this.state]++},kernel._Module.prototype.isSubChild=function(a){for(var b=0;b<this.children.length;b++)if(this.children[b].path==a||this.children[b].isSubChild(a))return!0;return!1},kernel._Module.prototype.isNeeded=function(){return this._tickets.length>0||this.children.length>0},kernel._Module.prototype.areParentsReady=function(){for(var a=0;a<this.parents.length;a++)if(this.parents[a].state!=kernel._states.ready)return!1;return!0},kernel._Module.prototype.require=function(a,b,c){this._tickets.push(a),this.state==kernel._states.ready?b&&kernel._platform.thread(b):(b&&this._sCallbacks.push(b),c&&this._fCallbacks.push(c))},kernel._Module.prototype.release=function(a){for(var b=0;b<this._tickets.length;b++)if(this._tickets[b]==a){this._tickets.splice(b,1);break}this.isNeeded()||(this.state==kernel._states.waiting?this.destroy():this.state==kernel._states.ready&&this.uninitialize())},kernel._Ticket=function(a,b,c){this._modules=a,this._sCb=b||null,this._fCb=c||null,this._load()},kernel._Ticket.prototype._load=function(){var a=this,b=null;if(this._sCb){var c=this._modules.length;b=function(){c--,c||a._sCb()}}for(var d=!1,e=function(b){d||(d=!0,kernel.release(a),a._fCb&&a._fCb(b))},f=0;f<this._modules.length;f++)this._modules[f].require(this,b,e)},kernel._Ticket.prototype._release=function(){for(var a=0;a<this._modules.length;a++)this._modules[a].release(this);if(this._stats)for(a=0;a<kernel._modules.length;a++)kernel._modules[a].removeStats(this._stats)},kernel._Ticket.prototype._getStats=function(){if(!this._stats){this._stats=[];for(var a in kernel._states)this._stats[kernel._states[a]]=0;for(a=0;a<this._modules.length;a++)this._modules[a].addStats(this._stats)}return this._stats},kernel._modules=[],kernel._activeModule=null,kernel._loadQueue=[],kernel._stats=[];for(var i in kernel._states)kernel._stats[kernel._states[i]]=0;kernel._getAbsolute=function(a,b){"http://"!=a.substr(0,7).toLowerCase()&&"https://"!=a.substr(0,8).toLowerCase()&&"/"!=a.substr(0,1)&&(a=b.substr(0,b.lastIndexOf("/")+1)+a);var c=a;do a=c,c=a.replace(/[\w\.~]*\/\.\.\//,"");while(c!=a);return a},kernel._getOrCreateModule=function(a){for(var b=null,c=0;c<kernel._modules.length;c++)kernel._modules[c].path==a&&(b=kernel._modules[c]);return b||(b=new kernel._Module(a),kernel._activeModule||kernel._loadNext()),b},kernel._loadNext=function(){if(init=uninit=null,kernel._loadQueue.length>0){for(var a=kernel._loadQueue[0],b=a.children.length,c=0,d=null,e=1;e<kernel._loadQueue.length;e++)d=kernel._loadQueue[e],d.children.length>b&&(b=d.children.length,a=d,c=e);kernel._loadQueue.splice(c,1),kernel._activeModule=a,kernel._activeModule.load()}else kernel._activeModule=null},kernel._throw=function(a){kernel._platform.thread(function(){throw a})},kernel._platform={},"undefined"!=typeof window&&"undefined"!=typeof window.addEventListener?(kernel._platform.thread=function(a,b,c){kernel._platform._threads.push([a,b||window,c]),window.postMessage(kernel._platform._threadMsg,"*")},kernel._platform._threads=[],kernel._platform._threadMsg="helios-thread-"+(new Date).getTime(),kernel._platform._startThread=function(a){if(a.source==window&&a.data==kernel._platform._threadMsg&&kernel._platform._threads.length>0){var b=kernel._platform._threads.shift();b[0].apply(b[1],b[2])}},window.addEventListener("message",kernel._platform._startThread,!0)):kernel._platform.thread=function(a,b,c){setTimeout(function(){a.apply(b||null,c||[])},10)},"undefined"!=typeof window?(kernel._platform._commonScript=document.createElement("script"),kernel._platform._invalidateTimeout=4e3,kernel._platform.load=function(a,b,c){"/"==a.charAt(0)&&(a=a.substr(1,a.length-1));var d=kernel._platform._commonScript.cloneNode(!1);d.src=a;var e=function(){clearTimeout(h),d.onload=null,d.onreadystatechange=null,d.parentNode.removeChild(d)},f=function(){e(),b()},g=function(){e(),c()};d.onload=f,d.onreadystatechange=function(){var a=d.readyState;("loaded"===a||"complete"===a)&&f()},d.onerror=g;var h=setTimeout(g,kernel._platform._invalidateTimeout);document.body.appendChild(d)}):kernel._platform.load=function(a,b,c){try{require(a),delete require.cache[a]}catch(d){kernel._platform.thread(c),kernel._throw(d)}kernel._platform.thread(b)},angularAsync=angular.module("angularAsync",[]),angular.module("angularAsync").config(["$controllerProvider","$compileProvider","$routeProvider","$filterProvider","$provide",function(a,b,c,d,e){var f=angular.module("angularAsync");f.controller=a.register,f.directive=b.directive,f.filter=d.register,f.factory=e.factory,f.service=e.service,f.value=e.value,f.constant=e.constant,f.provider=e.provider}]),angular.module("angularAsync").factory("async",["$rootScope","$q",function(a,b){var c={},d=function(d,e,f){var g=b.defer();return c[d]?g.resolve():kernel.require(d,function(){a.$apply(function(){c[d]=!0,g.resolve(),e&&e()})},function(){a.$apply(function(){c[d]=!1,g.reject(),f&&f()})}),g.promise};return{fetch:d}}]),angularAsync.require=kernel.require;